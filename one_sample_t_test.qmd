---
title: "One sample/Paired t-test"
format: html
author:
  - name: Hannah Bowley
  - name: Micaela Lembo
toc: true
editor: visual
theme: lux
---

## One Sample Paired t-test

-   One sample paired t-test is used to compare the means between two related groups.
-   Typically used to determine if the mean difference between the two groups is 0
-   Since this is a paired t-test, this means that each subject is measured twice
    -   Which makes a paired observation
-   This type of statistical test is usually used in case-control or repeated measures studies

#### T-test statistic

$$t=\frac{m}{\frac{s}{\sqrt{n}}}$$

### Install packages

```{r}
#| echo: true
#| message: false
#| warning: false

#install.packages("datarium")

```

### Load in libraries

```{r}
#| echo: true
#| message: false
#| warning: false

library(datarium)
library(tidyverse)
```

### Steps for one sample paired t-test

Know what the assumptions are:

1.  Are the two samples paired?\
2.  Is this a large sample?\
3.  Is the data normally distributed?\
4.  Is the dependent variable numeric or continuous?\
5.  Are the observations independent of each other?

Form your hypothesis:   
Null hypothesis: Assumes that the true mean difference is 0 There is no difference in mean between the 2 groups  
Alternative hypothesis: The true is mean difference is not 0

### Looking at data

Contains the weight of 10 mice before and after treatment

```{r}
#| echo: true
#| message: false
#| warning: false

head(mice2)
str(mice2)
print(mice2)
summary(mice2)
```

### Form our hypothesis:

Null hypothesis: There is no difference in the weight of the mice before and after treatment   
Alternative hypothesis: The treatment affected the weight of the mice

### T-test using base r

```{r}
#| echo: true
#| message: false
#| warning: false

# Weight before and after need to be in different vectors in order to see
# the difference in the t-test
before <- mice2$before
after <- mice2$after

# Computing t-test 
Mice.test <- t.test(before, after, paired = TRUE)

Mice.test

```

### T-test result

t-test (t) statistic was found to be (t=-25.546)

Degree of freedom (df = 9)

Level of significance (p-value = 1.039e-09 )

Confidence interval (CI) (-217.1442,-181.8158)

P-value was found to be 1.039e-09, which is less than 0.05, meaning that we reject the null hypothesis The average weight of the mice before the treatment is significantly different from the average weight after the treatment.

## T test using tidymodels package

![image](image.png)

### Install and Load tidymodels package

```{r}
#| echo: true
# install.packages("tidymodels")
library(tidymodels)
```

### calculate test statistic

```{r}
#| echo: true
## calculate the observed statistic

observed_statistic <- mice2 %>% 
  mutate(difference = after - before) %>% 
  specify(response = difference) %>% 
  calculate(stat = "mean")

observed_statistic
```
This result of -199.48 matches the base R result that showed a mean difference of -199.48

### generate the null distribution and the test statistic

```{r}
#| echo: true
null_dist_1_sample <- mice2 %>% 
  mutate(difference = after - before) %>% 
  specify(response = difference) %>% 
  hypothesize(null = "point", mu = 180) %>% 
  generate(reps = 1000, type = "bootstrap") %>% 
  calculate(stat = "mean") 

visual <- null_dist_1_sample %>% 
  visualize() +
  shade_p_value(observed_statistic, direction = "two-sided")

visual


```
### Calculate P-value
```{r}
#| echo: true
p_value_1_sample <- null_dist_1_sample %>% 
  get_p_value(obs_stat = observed_statistic,
              direction = "two-sided")

p_value_1_sample
```

